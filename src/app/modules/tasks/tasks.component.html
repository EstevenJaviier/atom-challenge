<div class="bg-gray-100">
  <!-- 1. Toolbar (Header) -->
<mat-toolbar
  color="primary"
  class="h-16 shadow-lg bg-blue-600"
>
<div class="w-full max-w-4xl mx-auto flex justify-between">
  <span class="text-xl font-bold ml-4">MIS NOTAS</span>
  <span class="flex-auto"></span>
  <button mat-flat-button color="accent" (click)="logout()">
    CERRAR SESIÃ“N
  </button>
  
</div>
</mat-toolbar>

<!-- 2. Main Content Area -->
<div class="p-4 md:p-8 max-w-4xl mx-auto">
  <button
    mat-fab
    color="accent"
    class="!fixed !bottom-8 !left-8 shadow-xl !bg-green-500 hover:!bg-green-600 text-white"
    (click)="handleTask()"
  >
    <mat-icon>add</mat-icon>
  </button>

  <div class="space-y-4" *ngIf="isLoading()">
    <mat-card class="rounded-xl shadow-md p-5" *ngFor="let item of [1,2,3];">
      <div class="flex justify-between items-center mb-4">
        <div class="h-6 w-20 bg-gray-200 rounded-full animate-pulse"></div>
        <div class="flex space-x-2">
          <div class="h-6 w-6 bg-gray-200 rounded-md animate-pulse"></div>
          <div class="h-6 w-6 bg-gray-200 rounded-md animate-pulse"></div>
          <div class="h-6 w-6 bg-gray-200 rounded-md animate-pulse"></div>
        </div>
      </div>
      <div class="h-7 w-3/4 bg-gray-200 rounded animate-pulse mb-3"></div>
      <div class="h-5 w-full bg-gray-200 rounded animate-pulse"></div>
      <div class="flex justify-end pt-2">
        <div class="h-4 w-24 bg-gray-200 rounded animate-pulse"></div>
      </div>
    </mat-card>

  </div>

  <div class="space-y-4">
    <ng-container *ngIf="!isLoading() && taskList()?.length">
      <mat-card
        *ngFor="let task of taskList(); trackBy: trackByFn"
        class="rounded-xl shadow-md transition-shadow hover:shadow-lg p-5"
      >
        <div class="flex justify-between items-center mb-4">
          <span
            class="px-3 py-1 text-xs font-semibold rounded-full"
            [class]="
              task.isCompleted
                ? 'bg-indigo-200 text-indigo-800'
                : 'bg-red-200 text-red-800'
            "
          >
            {{ task.isCompleted ? "Completada" : "Pendiente" }}
          </span>

          <div class="flex space-x-1 text-gray-400">
            <button
              mat-icon-button
              (click)="toggleCompletion(task)"
              title="Completar/Descompletar"
            >
              <mat-icon class="text-gray-500 hover:text-green-600">{{
                task.isCompleted ? "check_box" : "check_box_outline_blank"
              }}</mat-icon>
            </button>

            <button
              mat-icon-button
              (click)="handleTask(task)"
              title="Editar"
            >
              <mat-icon class="text-gray-500 hover:text-blue-600"
                >edit</mat-icon
              >
            </button>

            <button
              mat-icon-button
              (click)="deleteTask(task)"
              title="Eliminar"
            >
              <mat-icon class="text-gray-500 hover:text-red-600"
                >delete</mat-icon
              >
            </button>
          </div>
        </div>

        <div class="space-y-3">
          <h3 class="text-xl font-bold text-gray-900">{{ task.title }}</h3>
          <p class="text-gray-600">{{ task.description }}</p>

          <div class="flex justify-end pt-2">
            <span class="text-xs text-gray-400">{{
              task.createdAt | appFormDate
            }}</span>
          </div>
        </div>
      </mat-card>
    </ng-container>

    <div
      class="text-center p-10 bg-white rounded-xl shadow-md text-gray-500"
      *ngIf="!isLoading() && !taskList()?.length"
    >
      <mat-icon class="text-4xl text-gray-400">assignment</mat-icon>
      <p class="mt-2">No tienes notas creadas.</p>
    </div>
  </div>
</div>

</div>